function showTabProduk (){

    document.getElementById('profilDetail').innerHTML = `
        <div class="p-6">
            <div class="grid grid-cols-3 gap-4">
                <div>
                    <div class='w-full text-center'>
                        <div class="text-[10pt] leading-[15px] mb-[5px]"><div class='h-[8pt] w-[80px] bg-slate-100 shimmer'></div></div>
                        <div class="font-bold text-[16pt] leading-[15px] w-full text-sky-400"><div class='h-[14pt] w-[100px] bg-slate-100 shimmer'></div></div>
                    </div>
                </div>
                <div>
                <div class='h-[20pt] w-[full] bg-slate-100 shimmer'></div>
                </div>
                <div class="text-center">
                <div class='h-[15pt] w-[70%] bg-slate-100 shimmer'></div>
                </div>
            </div>
        </div>
        <div class="p-6 border-b-[1px] border-solid border-slate-200 hover:bg-slate-50 relative">
            <div class="float-left w-[90px] h-[90px] bg-slate-100 ">
            <div class='h-[90px] w-[90px] bg-slate-100 shimmer'></div>
            </div>
            <div class="float-left ml-[20px]">
                <h2 class="font-semibold text-[12pt] leading-[15px] mb-2"><div class='h-[15pt] w-[70%] bg-slate-100 shimmer'></div></h2>
                <div class="w-[90%] text-gray-400 leading-[15px] mb-2"><div class='h-[25pt] w-full bg-slate-100 shimmer'></div></div>
                <div class="w-[90%] text-sky-400 leading-[15px] font-bold ont-mb-2"><div class='h-[20pt] w-[300px] bg-slate-100 shimmer'></div></div>
                <div class="py-2"><hr></div>
                <div class="flex justify-left items-center">
                    <button class="px-4 py-1 rounded-[25px]  text-white text-[10pt]"><div class='h-[15pt] w-[200px] bg-slate-100 shimmer'></div></button>
                    <button class="px-2 py-1 rounded-[25px] text-[14pt] flex justify-center items-center"> 
                        <span class='text-[10pt] ml-[5px] font-semibold'><div class='h-[15pt] w-[300px] bg-slate-100 shimmer'></div></span>
                    </button>
                </div>
            </div>
            <div class="clear-both"></div>
        </div>
        <div class="p-6 border-b-[1px] border-solid border-slate-200 hover:bg-slate-50 relative">
            <div class="float-left w-[90px] h-[90px] bg-slate-100 ">
            <div class='h-[90px] w-[90px] bg-slate-100 shimmer'></div>
            </div>
            <div class="float-left ml-[20px]">
                <h2 class="font-semibold text-[12pt] leading-[15px] mb-2"><div class='h-[15pt] w-[70%] bg-slate-100 shimmer'></div></h2>
                <div class="w-[90%] text-gray-400 leading-[15px] mb-2"><div class='h-[25pt] w-full bg-slate-100 shimmer'></div></div>
                <div class="w-[90%] text-sky-400 leading-[15px] font-bold ont-mb-2"><div class='h-[20pt] w-[300px] bg-slate-100 shimmer'></div></div>
                <div class="py-2"><hr></div>
                <div class="flex justify-left items-center">
                    <button class="px-4 py-1 rounded-[25px]  text-white text-[10pt]"><div class='h-[15pt] w-[200px] bg-slate-100 shimmer'></div></button>
                    <button class="px-2 py-1 rounded-[25px] text-[14pt] flex justify-center items-center"> 
                        <span class='text-[10pt] ml-[5px] font-semibold'><div class='h-[15pt] w-[300px] bg-slate-100 shimmer'></div></span>
                    </button>
                </div>
            </div>
            <div class="clear-both"></div>
        </div>
        <div class="p-6 border-b-[1px] border-solid border-slate-200 hover:bg-slate-50 relative">
            <div class="float-left w-[90px] h-[90px] bg-slate-100 ">
            <div class='h-[90px] w-[90px] bg-slate-100 shimmer'></div>
            </div>
            <div class="float-left ml-[20px]">
                <h2 class="font-semibold text-[12pt] leading-[15px] mb-2"><div class='h-[15pt] w-[70%] bg-slate-100 shimmer'></div></h2>
                <div class="w-[90%] text-gray-400 leading-[15px] mb-2"><div class='h-[25pt] w-full bg-slate-100 shimmer'></div></div>
                <div class="w-[90%] text-sky-400 leading-[15px] font-bold ont-mb-2"><div class='h-[20pt] w-[300px] bg-slate-100 shimmer'></div></div>
                <div class="py-2"><hr></div>
                <div class="flex justify-left items-center">
                    <button class="px-4 py-1 rounded-[25px]  text-white text-[10pt]"><div class='h-[15pt] w-[200px] bg-slate-100 shimmer'></div></button>
                    <button class="px-2 py-1 rounded-[25px] text-[14pt] flex justify-center items-center"> 
                        <span class='text-[10pt] ml-[5px] font-semibold'><div class='h-[15pt] w-[300px] bg-slate-100 shimmer'></div></span>
                    </button>
                </div>
            </div>
            <div class="clear-both"></div>
        </div>
        <div class="p-6 border-b-[1px] border-solid border-slate-200 hover:bg-slate-50 relative">
            <div class="float-left w-[90px] h-[90px] bg-slate-100 ">
            <div class='h-[90px] w-[90px] bg-slate-100 shimmer'></div>
            </div>
            <div class="float-left ml-[20px]">
                <h2 class="font-semibold text-[12pt] leading-[15px] mb-2"><div class='h-[15pt] w-[70%] bg-slate-100 shimmer'></div></h2>
                <div class="w-[90%] text-gray-400 leading-[15px] mb-2"><div class='h-[25pt] w-full bg-slate-100 shimmer'></div></div>
                <div class="w-[90%] text-sky-400 leading-[15px] font-bold ont-mb-2"><div class='h-[20pt] w-[300px] bg-slate-100 shimmer'></div></div>
                <div class="py-2"><hr></div>
                <div class="flex justify-left items-center">
                    <button class="px-4 py-1 rounded-[25px]  text-white text-[10pt]"><div class='h-[15pt] w-[200px] bg-slate-100 shimmer'></div></button>
                    <button class="px-2 py-1 rounded-[25px] text-[14pt] flex justify-center items-center"> 
                        <span class='text-[10pt] ml-[5px] font-semibold'><div class='h-[15pt] w-[300px] bg-slate-100 shimmer'></div></span>
                    </button>
                </div>
            </div>
            <div class="clear-both"></div>
        </div>
        <div class="p-6 border-b-[1px] border-solid border-slate-200 hover:bg-slate-50 relative">
            <div class="float-left w-[90px] h-[90px] bg-slate-100 ">
            <div class='h-[90px] w-[90px] bg-slate-100 shimmer'></div>
            </div>
            <div class="float-left ml-[20px]">
                <h2 class="font-semibold text-[12pt] leading-[15px] mb-2"><div class='h-[15pt] w-[70%] bg-slate-100 shimmer'></div></h2>
                <div class="w-[90%] text-gray-400 leading-[15px] mb-2"><div class='h-[25pt] w-full bg-slate-100 shimmer'></div></div>
                <div class="w-[90%] text-sky-400 leading-[15px] font-bold ont-mb-2"><div class='h-[20pt] w-[300px] bg-slate-100 shimmer'></div></div>
                <div class="py-2"><hr></div>
                <div class="flex justify-left items-center">
                    <button class="px-4 py-1 rounded-[25px]  text-white text-[10pt]"><div class='h-[15pt] w-[200px] bg-slate-100 shimmer'></div></button>
                    <button class="px-2 py-1 rounded-[25px] text-[14pt] flex justify-center items-center"> 
                        <span class='text-[10pt] ml-[5px] font-semibold'><div class='h-[15pt] w-[300px] bg-slate-100 shimmer'></div></span>
                    </button>
                </div>
            </div>
            <div class="clear-both"></div>
        </div>
    `;


    document.getElementById('btnProduk').setAttribute('class', 'cursor-pointer px-6 text-gray-300 text-sky-400 font-semibold border-b-[2px] border-solid border-sky-400 pt-4 pb-[14px]');
    document.getElementById('btnAlamat').setAttribute('class', 'cursor-pointer py-4 px-6 text-gray-300 hover:text-gray-500 font-semibold');
    document.getElementById('btnBiodata').setAttribute('class', 'cursor-pointer py-4 px-6 text-gray-300 hover:text-gray-500 font-semibold');
    document.getElementById('btnPembayaran').setAttribute('class', 'cursor-pointer py-4 px-6 text-gray-300 hover:text-gray-500 font-semibold');
    /// Produk
    let produk = new Worker(BASEURL+'/assets/jsa/worker/worker-produk.js');
    produk.postMessage([BASEURL,APIKEY]);
    produk.onmessage = function(e) {
        let data = e.data;
        let result = "";
        result += `<div class="p-6">
            <div class="grid grid-cols-3 gap-4">
                <div>
                    <div class='w-full text-center'>
                        <div class="text-[10pt] leading-[15px] mb-[5px]">Jumlah Data</div>
                        <div class="font-bold text-[16pt] leading-[15px] w-full text-sky-400">`+data.length+`</div>
                    </div>
                </div>
                <div>
                    <input type='text' class="border-[1px] border-solid border-slate-200 outline-none rounded-md px-4 py-2 focus:border-gray-200 focus:bg-gray-50" placeholder="Cari Produk">
                </div>
                <div class="text-center">
                    <button onClick="tambahProduk()" class="bg-sky-400 hover:bg-sky-300 text-white px-3 py-1 rounded-md">Tambah Produk</button>
                </div>
            </div>
        </div>`;
        for(let i = 0; i < data.length; i++){

            let warna = "bg-green-400";
            if(data[i].publik == "draf"){
                warna = "bg-red-400";
            }else{
                warna = "bg-green-400";
            }

            result +=`
            <div class="p-6 border-b-[1px] border-solid border-slate-200 hover:bg-slate-50 relative">
                <div class="absolute w-[90px] h-[90px] bg-slate-100 ">
                    <img src='`+data[i].gambar+`' class="w-[90px] h-[90px] object-cover">
                </div>
                <div class="float-left ml-[110px]">
                    <h2 class="font-semibold text-[12pt] leading-[15px] mb-2">`+data[i].nama+`</h2>
                    <div class="w-[90%] text-gray-400 leading-[15px] mb-2">`+data[i].keterangan+`</div>
                    <div class="w-[90%] text-sky-400 leading-[15px] font-bold ont-mb-2">Rp. `+data[i].harga+`</div>
                    <div class="py-2"><hr></div>
                    <div class="flex justify-left items-center">
                        <button class="px-4 py-1 rounded-[25px] `+warna+` text-white text-[10pt]">`+data[i].publik+`</button>
                        <button class="px-2 py-1 rounded-[25px] text-[14pt] flex justify-center items-center">
                            <i class="las la-eye"></i>    
                            <span class='text-[10pt] ml-[5px] font-semibold'>`+data[i].dilihat+`</span>
                        </button>
                        <button class="px-2 py-1 rounded-[25px] text-[14pt] flex justify-center items-center">
                            <i class="las la-file-invoice-dollar"></i> 
                            <span class='text-[10pt] ml-[5px] font-semibold'>`+data[i].laku+`</span>
                        </button>
                        <button class="px-2 py-1 rounded-[25px] text-[14pt] flex justify-center items-center">
                            <i class="las la-box-open"></i>
                            <span class='text-[10pt] ml-[5px] font-semibold'>`+data[i].stok+`</span>
                        </button>
                        <button class="px-2 py-1 rounded-[25px] text-[14pt] flex justify-center items-center">
                            <i class="las la-heart"></i>
                            <span class='text-[10pt] ml-[5px] font-semibold'>`+data[i].disukai+`</span>
                        </button>
                    </div>
                </div>
                <div class="absolute right-0">
                    <div>
                        <button id="`+data[i].id+`" onClick="editProduk(this.id)" class="mr-[10px] mt-[-20px] text-gray-200 hover:text-green-400 font-bold text-[14pt]" title='edit'><i class="las la-edit"></i></button>
                        <button id="`+data[i].id+`" onClick="deleteProduk(this.id)" class="mr-[20px] mt-[-20px] text-gray-200 hover:text-red-400 font-bold text-[14pt]" title='hapus'><i class="las la-times"></i></button>
                    </div>
                </div>
                <div class="clear-both"></div>
            </div>`;
        }
        document.getElementById('profilDetail').innerHTML = result;
    }
}

function tambahProduk(){
    document.getElementById('popup').innerHTML = `
        <div class="fixed top-[130px] left-0 right-0 z-[9999]">
            <div class="w-full flex justify-center item-center">
                <div class="bg-white w-[400px] rounded-lg p-6 relative">
                    <button class='absolute right-[15px] top-[10px] outline-none border-none' onClick='hidePopUp()'>
                    <i class="las la-times"></i>
                    </button>
                    <div class="font-semibold text-[14pt] text-center">Tambah Produk</div>
                    <div class="mt-2 text-center text-gray-400">
                        Pastikan nama dan keterangan produk sesuai dengan yang akan dijual.
                    </div>
                    <div class="mt-2">
                        <form onSubmit='return submitProduk()' method='post' action='' id='formProduk' name='formProduk'>
                            <div>
                                <div class="mb-2">
                                    <input class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 w-full rounded-md text-[10pt]' type='text' id='nama' name='nama' placeholder="Nama">
                                </div>
                                <div>
                                    <textarea class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 w-full rounded-md text-[10pt]' type='text' id='keterangan' name='keterangan' placeholder="keterangan"></textarea>
                                </div>
                                <div class="grid grid-cols-2 gap-2 mb-2">
                                    <input class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 rounded-md text-[10pt]' type='text' id='harga' name='harga' placeholder="harga">
                                    <input class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 rounded-md text-[10pt]' type='text' id='stok' name='stok' placeholder="stok">
                                </div>
                                <div class="mb-2">
                                    <select class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 w-full rounded-md text-[10pt]' type='text' id='kategori_id' name='kategori_id'>
                                        <option value=''>Pilih Kategori Produk</option>
                                        <option value='1'>Aneka Kue</option>
                                        <option value='2'>Kue Pengantin</option>
                                        <option value='3'>Kue Khitan</option>
                                        <option value='4'>Kue Ulang Tahun</option>
                                        <option value='5'>Tumpeng</option>
                                        <option value='6'>Puding</option>
                                        <option value='7'>Snack Box</option>
                                    </select>
                                </div>
                                <div class="mt-2">
                                    <label class="text-center block text-[10pt] text-bg-gray-200 mb-2 mt-2">Upload Gambar Produk</label>
                                    <input type='file' class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 w-full rounded-md text-[10pt]' type='text' id='gambar' name='gambar'>
                                </div>
                                <div class="text-center">
                                    <button type='submit' id='btnSubmitProduk' class="bg-sky-400 hover:bg-sky-300 px-4 py-2 text-white font-semibold rounded-md text-[10pt] mt-4 mb-2">Simpan Produk</button>
                                </div>
                            </div>                        
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="fixed z-[999] top-[83px] right-0 bottom-0 left-0" onClick='hidePopUp()' style='background-color:rgba(0,0,0,.7)'></div>
    `;
}

function submitProduk(){
    let nama = document.forms["formProduk"]["nama"].value;
    let keterangan = document.forms["formProduk"]["keterangan"].value;
    let harga = document.forms["formProduk"]["harga"].value;
    let stok = document.forms["formProduk"]["stok"].value;
    let kategori_id = document.forms["formProduk"]["kategori_id"].value;
    let gambar = document.forms["formProduk"]["gambar"].value;
    if (setText(nama)) {
        toastr.info("Nama " + setText(nama));
        document.getElementById("nama").focus();
        return false;
    }else if (setText(keterangan)) {
        toastr.info("Keterangan " + setText(keterangan));
        document.getElementById("keterangan").focus();
        return false;
    }else if (setAngkaOnly(harga)) {
        toastr.info("Harga " + setAngkaOnly(harga));
        document.getElementById("harga").focus();
        return false;
    }else if (setAngkaOnly(stok)) {
        toastr.info("Stok " + setAngkaOnly(stok));
        document.getElementById("stok").focus();
        return false;
    }else if (setPilihan(kategori_id)) {
        toastr.info("Kategori " + setPilihan(kategori_id));
        document.getElementById("kategori_id").focus();
        return false;
    }else if (setPilihan(gambar)) {
        toastr.info("Gambar " + setPilihan(gambar));
        document.getElementById("gambar").focus();
        return false;
    }else{
        const formData = new FormData();
        const fileGambar = document.querySelector('input[type="file"]');
        formData.append('gambar', fileGambar.files[0]);
        formData.append('nama', nama);
        formData.append('keterangan', keterangan);
        formData.append('harga', harga);
        formData.append('stok', stok);
        formData.append('kategori_id', kategori_id);
        fetch(BASEURL + "/produk/new", {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if(data[0].status){
                if(data[0].status == "Cancel"){
                    toastr.error("Gagal menambahkan produk");
                }else{
                    toastr.error(data[0].status);
                }
            }else{
                toastr.success("Produk baru telah dibuat");
                nama.value = "";
                keterangan.value = "";
                harga.value = "";
                stok.value = "";
                gambar.value = "";
                showTabProduk();
            }
        })
        .catch(error => {
            toastr.error("Gagal menambahkan produk");
        });
        return false;
    }
}

function editProduk(ID){

    document.getElementById('popup').innerHTML = `
        <div class="fixed top-[130px] left-0 right-0 z-[9999]">
            <div class="w-full flex justify-center item-center">
                <div class="bg-white w-[400px] rounded-lg relative">
                    <div class="px-6 pt-6">
                        <button class='absolute right-[15px] top-[10px] outline-none border-none' onClick='hidePopUp()'>
                        <i class="las la-times"></i>
                        </button>
                        <div class="font-semibold text-[14pt] text-center"><div class="w-[40%] h-[20px] bg-slate-100 shimmer"></div></div>
                        <div class="mt-2 text-center text-gray-400">
                            <div class="w-[70%] h-[20px] bg-slate-100 shimmer"></div>
                        </div>
                    </div>
                    <div class="mt-2 max-h-[350px] overflow-auto p-6">
                        <form onSubmit=' method='post' action='' id='' name=''>
                            <div>
                                <div class="mb-2">
                                    <div class="w-full h-[20px] bg-slate-100 shimmer"></div>
                                </div>
                                <div>
                                    <div class="w-full h-[20px] bg-slate-100 shimmer"></div>
                                </div>
                                <div class="grid grid-cols-2 gap-2 mb-2">
                                    <div class="w-full h-[20px] bg-slate-100 shimmer"></div>
                                    <div class="w-full h-[20px] bg-slate-100 shimmer"></div>
                                </div>
                                <div class="mb-2">
                                    <div class="w-full h-[20px] bg-slate-100 shimmer"></div>
                                </div>
                                <div class="grid grid-cols-2 gap-2 mb-2">
                                    <div class="w-full h-[20px] bg-slate-100 shimmer"></div>
                                    <div class="w-full h-[20px] bg-slate-100 shimmer"></div>
                                </div>
                                <div class="mb-2">
                                    <div class="w-full h-[20px] bg-slate-100 shimmer"></div>
                                </div>
                                <div class="mt-2">
                                    <div class="w-full h-[20px] bg-slate-100 shimmer"></div>
                                </div>
                                <div class="text-center">
                                    <div class="w-[60%] h-[20px] bg-slate-100 shimmer"></div>
                                </div>
                            </div>                        
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="fixed z-[999] top-[83px] right-0 bottom-0 left-0" onClick='hidePopUp()' style='background-color:rgba(0,0,0,.7)'></div>
    `;


    let editproduk = new Worker(BASEURL + '/assets/jsa/worker/CrudProduk/worker-read.js');
    editproduk.postMessage([BASEURL,APIKEY,ID]);
    editproduk.onmessage = function(e) {
        let data = e.data;
        
        document.getElementById('popup').innerHTML = `
            <div class="fixed top-[130px] left-0 right-0 z-[9999]">
                <div class="w-full flex justify-center item-center">
                    <div class="bg-white w-[400px] rounded-lg relative">
                        <div class="px-6 pt-6">
                            <button class='absolute right-[15px] top-[10px] outline-none border-none' onClick='hidePopUp()'>
                            <i class="las la-times"></i>
                            </button>
                            <div class="font-semibold text-[14pt] text-center">Tambah Produk</div>
                            <div class="mt-2 text-center text-gray-400">
                                Pastikan nama dan keterangan produk sesuai dengan yang akan dijual.
                            </div>
                        </div>
                        <div class="mt-2 max-h-[350px] overflow-auto p-6">
                            <form onSubmit='return submitEditProduk()' method='post' action='' id='formEditProduk' name='formEditProduk'>
                                <div>
                                    <div class="mb-2">
                                        <input class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 w-full rounded-md text-[10pt]' type='text' id='nama' name='nama' placeholder="Nama" value='`+data[0].nama+`'>
                                    </div>
                                    <div>
                                        <textarea class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 w-full rounded-md text-[10pt]' type='text' id='keterangan' name='keterangan' placeholder="keterangan">`+data[0].keterangan+`</textarea>
                                    </div>
                                    <div class="grid grid-cols-2 gap-2 mb-2">
                                        <input class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 rounded-md text-[10pt]' type='text' id='harga' name='harga' placeholder="harga" value="`+data[0].harga+`">
                                        <input class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 rounded-md text-[10pt]' type='text' id='stok' name='stok' placeholder="stok" value="`+data[0].stok+`">
                                    </div>
                                    <div class="mb-2">
                                        <select class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 w-full rounded-md text-[10pt]' id='kategori_id' name='kategori_id'>
                                            <option value='`+data[0].kid_value+`'>`+data[0].kid_label+`</option>
                                            <option value='1'>Aneka Kue</option>
                                            <option value='2'>Kue Pengantin</option>
                                            <option value='3'>Kue Khitan</option>
                                            <option value='4'>Kue Ulang Tahun</option>
                                            <option value='5'>Tumpeng</option>
                                            <option value='6'>Puding</option>
                                            <option value='7'>Snack Box</option>
                                        </select>
                                    </div>
                                    <div class="grid grid-cols-2 gap-2 mb-2">
                                        <input class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 w-full rounded-md text-[10pt]' type='text' id='diskon' name='diskon' placeholder="Diskon" value='`+data[0].diskon+`'>
                                        <select class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 w-full rounded-md text-[10pt]'id='publik' name='publik'>
                                            <option value='`+data[0].publik_value+`'>`+data[0].publik_label+`</option>
                                            <option value='publik'>Publik</option>
                                            <option value='draf'>Draf</option>
                                        </select>
                                    </div>
                                    <div class="mb-2">
                                        <input class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 w-full rounded-md text-[10pt]' type='text' id='slug' name='slug' placeholder="Slug" value='`+data[0].slug+`'>
                                    </div>
                                    <div class="mt-2">
                                        <input type='hidden' id="id" name="id" value='`+data[0].id+`'>
                                        <label class="text-center block text-[10pt] text-bg-gray-200 mb-2 mt-2">Upload Gambar Produk</label>
                                        <input type='file' class='outline-none border-[1px] border-solid border-gray-300 py-2 px-3 w-full rounded-md text-[10pt]' type='text' id='gambar' name='gambar'>
                                    </div>
                                    <div class="text-center">
                                        <button type='submit' id='btnSubmitProduk' class="bg-sky-400 hover:bg-sky-300 px-4 py-2 text-white font-semibold rounded-md text-[10pt] mt-4 mb-2">Simpan Perubahan</button>
                                    </div>
                                </div>                        
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="fixed z-[999] top-[83px] right-0 bottom-0 left-0" onClick='hidePopUp()' style='background-color:rgba(0,0,0,.7)'></div>
        `;


    }
}

function submitEditProduk(){
    let nama = document.forms["formEditProduk"]["nama"].value;
    let keterangan = document.forms["formEditProduk"]["keterangan"].value;
    let harga = document.forms["formEditProduk"]["harga"].value;
    let stok = document.forms["formEditProduk"]["stok"].value;
    let kategori_id = document.forms["formEditProduk"]["kategori_id"].value;
    let diskon = document.forms["formEditProduk"]["diskon"].value;
    let publik = document.forms["formEditProduk"]["publik"].value;
    let slug = document.forms["formEditProduk"]["slug"].value;
    let id = document.forms["formEditProduk"]["id"].value;
    if (setText(nama)) {
        toastr.info("Nama " + setText(nama));
        document.getElementById("nama").focus();
        return false;
    }else if (setText(keterangan)) {
        toastr.info("Keterangan " + setText(keterangan));
        document.getElementById("keterangan").focus();
        return false;
    }else if (setAngkaOnly(harga)) {
        toastr.info("Harga " + setAngkaOnly(harga));
        document.getElementById("harga").focus();
        return false;
    }else if (setAngkaOnly(stok)) {
        toastr.info("Stok " + setAngkaOnly(stok));
        document.getElementById("stok").focus();
        return false;
    }else{
        const formData = new FormData();
        const gambar = document.querySelector('input[type="file"]');
        formData.append('gambar', gambar.files[0]);
        formData.append('nama', nama);
        formData.append('keterangan', keterangan);
        formData.append('harga', harga);
        formData.append('stok', stok);
        formData.append('kategori_id', kategori_id);
        formData.append('diskon', diskon);
        formData.append('publik', publik);
        formData.append('slug', slug);
        formData.append('id', id);
        fetch(BASEURL + '/produk/update', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if(data[0].message == "Sukses"){
                toastr.success("Data diperbarui");
                showTabProduk();
            }else if(data[0].message == "Cancel"){
                toastr.error("Data gagal diperbarui");
                return false;
            }else{
                toastr.error(data[0].message);
                return false;
            }
        })
        .catch(error => console.error(error));
        return false;
    }
}

function deleteProduk(ID){
    let hapusproduk = new Worker(BASEURL + '/assets/jsa/worker/CrudProduk/worker-delete.js');
    hapusproduk.postMessage([BASEURL,APIKEY,ID]);
    hapusproduk.onmessage = function(e) {
        let data = e.data;
        if(data[0].message == "Berhasil"){
            showTabProduk();
            toastr.success("Produk sudah dihapus");
        }else{
            toastr.error(data[0].message);
        }
    }
}